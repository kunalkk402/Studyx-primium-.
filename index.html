<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Educational Platform</title>
    <script>
      (function() {
        // 1. Check last access time
        const lastAccessTime = localStorage.getItem('lastAccessTime');
        const currentTime = new Date().getTime();
        const twentyFourHours = 24 * 60 * 60 * 1000;
        
        // 2. Check if coming from vplink
        const urlParams = new URLSearchParams(window.location.search);
        const fromVplink = urlParams.has('fromVplink');
        
        // 3. Access control logic
        if (fromVplink) {
          // Valid access from vplink - update access time
          localStorage.setItem('lastAccessTime', currentTime.toString());
        } else if (!lastAccessTime || (currentTime - lastAccessTime > twentyFourHours)) {
          // Either first access or 24h passed - redirect to keygen
          localStorage.setItem('lastAccessTime', currentTime.toString());
          window.location.href = "https://key-gen-cyberpunk-glow.lovable.app/";
          return;
        }
        
        // 4. Set 24h session timeout
        setTimeout(() => {
          localStorage.removeItem('lastAccessTime');
          window.location.href = "https://key-gen-cyberpunk-glow.lovable.app/";
        }, twentyFourHours);
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
