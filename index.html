<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Educational Platform</title>
    <script>
      (function() {
        // Check if user came through vplink.in redirect
        const urlParams = new URLSearchParams(window.location.search);
        const fromVplink = urlParams.has('fromVplink');
        
        // Set a flag in localStorage when user comes through vplink.in
        if (fromVplink) {
          localStorage.setItem('validEntry', 'true');
          localStorage.setItem('lastAccessTime', new Date().getTime().toString());
        }
        
        // Check if user has valid entry permission
        const hasValidEntry = localStorage.getItem('validEntry') === 'true';
        const lastAccessTime = localStorage.getItem('lastAccessTime');
        const currentTime = new Date().getTime();
        const twentyFourHours = 24 * 60 * 60 * 1000;
        
        if (!hasValidEntry) {
          // If no valid entry, redirect to vplink.in
          window.location.href = "https://vplink.in/nrLwIQ";
          return;
        }
        
        if (!lastAccessTime || (currentTime - lastAccessTime > twentyFourHours)) {
          // If 24 hours have passed, show cyberpunk page first
          localStorage.setItem('lastAccessTime', currentTime.toString());
          window.location.href = "https://key-gen-cyberpunk-glow.lovable.app/";
          return;
        }
        
        // If we get here, user has valid entry and within 24 hours
        // Continue loading the normal app
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
